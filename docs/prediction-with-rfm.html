<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Prediction with RFM | 04-Covid19_Dashboard</title>
  <meta name="description" content="5 Prediction with RFM | 04-Covid19_Dashboard" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Prediction with RFM | 04-Covid19_Dashboard" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Prediction with RFM | 04-Covid19_Dashboard" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="customer-churn-prediction.html"/>
<link rel="next" href="rfm-for-customer-segmentation.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><B>Mirza Mujanovic Portfolio</B></a></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About me</a></li>
<li class="part"><span><b>II Text Mining in Marketing</b></span></li>
<li class="chapter" data-level="1" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html"><i class="fa fa-check"></i><b>1</b> Emotions In Online Customer Reviews</a>
<ul>
<li class="chapter" data-level="" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#what-to-expect-in-this-article"><i class="fa fa-check"></i>What to expect in this article?</a></li>
<li class="chapter" data-level="1.1" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#dictionaries-for-nlp"><i class="fa fa-check"></i><b>1.1</b> Dictionaries for NLP</a></li>
<li class="chapter" data-level="1.2" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#data-set"><i class="fa fa-check"></i><b>1.2</b> Data set</a></li>
<li class="chapter" data-level="1.3" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#corpus-cleaning"><i class="fa fa-check"></i><b>1.3</b> Corpus cleaning</a></li>
<li class="chapter" data-level="1.4" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#visualisations-of-terms-frequency"><i class="fa fa-check"></i><b>1.4</b> Visualisations of terms frequency</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#bar-charts-with-the-most-frequent-terms"><i class="fa fa-check"></i><b>1.4.1</b> Bar charts with the most frequent terms</a></li>
<li class="chapter" data-level="1.4.2" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#wordcloud-with-the-most-frequent-terms"><i class="fa fa-check"></i><b>1.4.2</b> Wordcloud with the most frequent terms</a></li>
<li class="chapter" data-level="1.4.3" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#the-most-frequent-terms-indicating-emotions"><i class="fa fa-check"></i><b>1.4.3</b> The most frequent terms indicating emotions</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#sentiment-analysis"><i class="fa fa-check"></i><b>1.5</b> Sentiment analysis</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#polarity-timeline"><i class="fa fa-check"></i><b>1.5.1</b> Polarity timeline</a></li>
<li class="chapter" data-level="1.5.2" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#analysis-on-sentence-level"><i class="fa fa-check"></i><b>1.5.2</b> Analysis on sentence-level</a></li>
<li class="chapter" data-level="1.5.3" data-path="emotions-in-online-customer-reviews.html"><a href="emotions-in-online-customer-reviews.html#what-are-the-most-emotional-reviews"><i class="fa fa-check"></i><b>1.5.3</b> What are the most emotional reviews?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Social Media Analysis</b></span></li>
<li class="chapter" data-level="2" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html"><i class="fa fa-check"></i><b>2</b> Twitter Analysis for CO2mustGo initiative</a>
<ul>
<li class="chapter" data-level="" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#what-is-co2mustgo"><i class="fa fa-check"></i>What is CO2mustGO?</a></li>
<li class="chapter" data-level="2.1" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#sankey-diagram-energy-production-capacity"><i class="fa fa-check"></i><b>2.1</b> Sankey diagram: Energy production capacity</a></li>
<li class="chapter" data-level="" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#twitter-data-analysis"><i class="fa fa-check"></i>Twitter data analysis</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#data"><i class="fa fa-check"></i><b>2.1.1</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#text-cleaning-and-preprocessing"><i class="fa fa-check"></i><b>2.2</b> Text cleaning and preprocessing</a></li>
<li class="chapter" data-level="2.3" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#tweets-distribution"><i class="fa fa-check"></i><b>2.3</b> Tweets distribution</a></li>
<li class="chapter" data-level="2.4" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#word-frequency-in-tweets"><i class="fa fa-check"></i><b>2.4</b> Word Frequency in Tweets</a></li>
<li class="chapter" data-level="2.5" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#word-network-in-tweets"><i class="fa fa-check"></i><b>2.5</b> Word Network in Tweets</a></li>
<li class="chapter" data-level="2.6" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#wordcloud"><i class="fa fa-check"></i><b>2.6</b> Wordcloud</a></li>
<li class="chapter" data-level="2.7" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#word-associations"><i class="fa fa-check"></i><b>2.7</b> Word associations</a></li>
<li class="chapter" data-level="2.8" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#lda"><i class="fa fa-check"></i><b>2.8</b> LDA</a></li>
<li class="chapter" data-level="2.9" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#sentiment-analysis-1"><i class="fa fa-check"></i><b>2.9</b> Sentiment analysis</a></li>
<li class="chapter" data-level="2.10" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#visualize-the-emotions"><i class="fa fa-check"></i><b>2.10</b> Visualize the emotions</a></li>
<li class="chapter" data-level="2.11" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#top-retweeted-tweets"><i class="fa fa-check"></i><b>2.11</b> Top retweeted Tweets</a>
<ul>
<li class="chapter" data-level="" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#top-retweets-with-equal-or-more-than-60-mentions"><i class="fa fa-check"></i>Top retweets (with equal or more than 60 mentions)</a></li>
<li class="chapter" data-level="" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#interactive-graph-with-retweets-text"><i class="fa fa-check"></i>Interactive graph with retweets’ text</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#network-of-retweets"><i class="fa fa-check"></i><b>2.12</b> Network of retweets</a>
<ul>
<li class="chapter" data-level="2.12.1" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#where-do-people-tweet-the-most"><i class="fa fa-check"></i><b>2.12.1</b> Where do people tweet the most?</a></li>
<li class="chapter" data-level="2.12.2" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#who-are-the-users-who-retweet-the-most"><i class="fa fa-check"></i><b>2.12.2</b> Who are the users who retweet the most?</a></li>
<li class="chapter" data-level="2.12.3" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#who-are-the-most-retweeted-users"><i class="fa fa-check"></i><b>2.12.3</b> Who are the most retweeted users?</a></li>
<li class="chapter" data-level="2.12.4" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#who-are-users-important-for-connecting-with-others-in-network"><i class="fa fa-check"></i><b>2.12.4</b> Who are users important for connecting with others in network?</a></li>
<li class="chapter" data-level="2.12.5" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#clustering"><i class="fa fa-check"></i><b>2.12.5</b> Clustering</a></li>
<li class="chapter" data-level="2.12.6" data-path="twitter-analysis-for-co2mustgo-initiative.html"><a href="twitter-analysis-for-co2mustgo-initiative.html#community-detection"><i class="fa fa-check"></i><b>2.12.6</b> Community detection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html"><i class="fa fa-check"></i><b>3</b> Job-Interview: Social Media Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#data-1"><i class="fa fa-check"></i><b>3.1</b> Data</a></li>
<li class="chapter" data-level="3.2" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#how-many-authors-have-interacted-in-the-database"><i class="fa fa-check"></i><b>3.2</b> How many authors have interacted in the database?</a></li>
<li class="chapter" data-level="3.3" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#which-one-is-the-most-used-media"><i class="fa fa-check"></i><b>3.3</b> Which one is the most used media?</a></li>
<li class="chapter" data-level="3.4" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#what-is-the-percentage-of-positive-negative-and-neutral-comments"><i class="fa fa-check"></i><b>3.4</b> What is the percentage of positive, negative and neutral comments?</a></li>
<li class="chapter" data-level="3.5" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#what-is-the-average-sentiment-in-twitter"><i class="fa fa-check"></i><b>3.5</b> What is the average sentiment in Twitter?</a></li>
<li class="chapter" data-level="3.6" data-path="job-interview-social-media-data.html"><a href="job-interview-social-media-data.html#visalisation-task"><i class="fa fa-check"></i><b>3.6</b> Visalisation task</a></li>
</ul></li>
<li class="part"><span><b>IV Customer analytics</b></span></li>
<li class="chapter" data-level="4" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html"><i class="fa fa-check"></i><b>4</b> Customer Churn Prediction</a>
<ul>
<li class="chapter" data-level="4.1" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#why-predicting-customer-churn"><i class="fa fa-check"></i><b>4.1</b> Why predicting customer churn?</a></li>
<li class="chapter" data-level="4.2" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#data-2"><i class="fa fa-check"></i><b>4.2</b> Data</a></li>
<li class="chapter" data-level="4.3" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#data-pre-processing"><i class="fa fa-check"></i><b>4.3</b> Data Pre-processing</a></li>
<li class="chapter" data-level="4.4" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#data-partition"><i class="fa fa-check"></i><b>4.4</b> Data partition</a></li>
<li class="chapter" data-level="4.5" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#random-forest-model"><i class="fa fa-check"></i><b>4.5</b> Random Forest model</a></li>
<li class="chapter" data-level="4.6" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#evaluating-model"><i class="fa fa-check"></i><b>4.6</b> Evaluating Model</a></li>
<li class="chapter" data-level="4.7" data-path="customer-churn-prediction.html"><a href="customer-churn-prediction.html#references"><i class="fa fa-check"></i><b>4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="prediction-with-rfm.html"><a href="prediction-with-rfm.html"><i class="fa fa-check"></i><b>5</b> Prediction with RFM</a>
<ul>
<li class="chapter" data-level="5.10" data-path="prediction-with-rfm.html"><a href="prediction-with-rfm.html#reference"><i class="fa fa-check"></i><b>5.10</b> Reference</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html"><i class="fa fa-check"></i><b>6</b> RFM for Customer Segmentation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#data-set-1"><i class="fa fa-check"></i><b>6.1</b> Data set</a></li>
<li class="chapter" data-level="6.2" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#exploratory-analysis"><i class="fa fa-check"></i><b>6.2</b> Exploratory Analysis</a></li>
<li class="chapter" data-level="6.3" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#identification-of-segments"><i class="fa fa-check"></i><b>6.3</b> Identification of segments</a></li>
<li class="chapter" data-level="6.4" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#clusters"><i class="fa fa-check"></i><b>6.4</b> Clusters</a></li>
<li class="chapter" data-level="6.5" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#clustering-via-heatmap"><i class="fa fa-check"></i><b>6.5</b> Clustering via Heatmap</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#new-customers"><i class="fa fa-check"></i><b>6.5.1</b> New customers</a></li>
<li class="chapter" data-level="6.5.2" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#repeated-customers"><i class="fa fa-check"></i><b>6.5.2</b> Repeated customers</a></li>
<li class="chapter" data-level="6.5.3" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#lost-customers"><i class="fa fa-check"></i><b>6.5.3</b> Lost customers</a></li>
<li class="chapter" data-level="6.5.4" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#lapsed-customers"><i class="fa fa-check"></i><b>6.5.4</b> Lapsed customers</a></li>
<li class="chapter" data-level="6.5.5" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#infrequent-customers"><i class="fa fa-check"></i><b>6.5.5</b> Infrequent customers</a></li>
<li class="chapter" data-level="6.5.6" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#high-value-customers"><i class="fa fa-check"></i><b>6.5.6</b> High-value customers</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="rfm-for-customer-segmentation.html"><a href="rfm-for-customer-segmentation.html#limitations"><i class="fa fa-check"></i><b>6.6</b> Limitations</a></li>
</ul></li>
<li class="part"><span><b>V Recommendation system</b></span></li>
<li class="chapter" data-level="7" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html"><i class="fa fa-check"></i><b>7</b> Recommender For Beauty Products</a>
<ul>
<li class="chapter" data-level="7.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#data-collection"><i class="fa fa-check"></i><b>7.1</b> Data collection</a></li>
<li class="chapter" data-level="7.2" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#data-preparation-and-preprocessing"><i class="fa fa-check"></i><b>7.2</b> Data preparation and preprocessing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#packages"><i class="fa fa-check"></i><b>7.2.1</b> Packages</a></li>
<li class="chapter" data-level="7.2.2" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#data-collection-1"><i class="fa fa-check"></i><b>7.2.2</b> Data collection</a></li>
<li class="chapter" data-level="7.2.3" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#how-many-times-users-reviewed-products"><i class="fa fa-check"></i><b>7.2.3</b> How many times users reviewed products?</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>7.3</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#head-of-data"><i class="fa fa-check"></i><b>7.3.1</b> Head of data</a></li>
<li class="chapter" data-level="7.3.2" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#how-many-unique-products-are-reviewed"><i class="fa fa-check"></i><b>7.3.2</b> How many unique products are reviewed?</a></li>
<li class="chapter" data-level="7.3.3" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#how-many-reviewers-do-we-have"><i class="fa fa-check"></i><b>7.3.3</b> How many reviewers do we have?</a></li>
<li class="chapter" data-level="7.3.4" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#how-many-scores-do-we-have"><i class="fa fa-check"></i><b>7.3.4</b> How many scores do we have?</a></li>
<li class="chapter" data-level="7.3.5" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#what-is-the-distribution-of-ratings"><i class="fa fa-check"></i><b>7.3.5</b> What is the distribution of ratings?</a></li>
<li class="chapter" data-level="7.3.6" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#what-is-the-average-number-of-reviews-per-user"><i class="fa fa-check"></i><b>7.3.6</b> What is the average number of reviews per user?</a></li>
<li class="chapter" data-level="7.3.7" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#what-is-the-average-score-per-user"><i class="fa fa-check"></i><b>7.3.7</b> What is the average score per user?</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#building-a-model"><i class="fa fa-check"></i><b>7.4</b> Building a model</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#final-data-outlook"><i class="fa fa-check"></i><b>7.4.1</b> Final data outlook</a></li>
<li class="chapter" data-level="7.4.2" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#subsetting-data"><i class="fa fa-check"></i><b>7.4.2</b> Subsetting data</a></li>
<li class="chapter" data-level="7.4.3" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#formatting-data"><i class="fa fa-check"></i><b>7.4.3</b> Formatting data</a></li>
<li class="chapter" data-level="7.4.4" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#inspecting-real-rating-matrix"><i class="fa fa-check"></i><b>7.4.4</b> Inspecting real rating matrix</a></li>
<li class="chapter" data-level="7.4.5" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#building-a-recommender"><i class="fa fa-check"></i><b>7.4.5</b> Building a recommender</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#interpretation-and-managerial-implications"><i class="fa fa-check"></i><b>7.5</b> Interpretation and managerial implications</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#identification-of-the-recommended-products"><i class="fa fa-check"></i><b>7.5.1</b> Identification of the recommended products</a></li>
<li class="chapter" data-level="7.5.2" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#implications"><i class="fa fa-check"></i><b>7.5.2</b> Implications</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#bonus-analysis-text-mining"><i class="fa fa-check"></i><b>7.6</b> Bonus analysis: Text Mining</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#wordcloud-1"><i class="fa fa-check"></i><b>7.6.1</b> Wordcloud</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#future-work"><i class="fa fa-check"></i><b>7.7</b> Future work</a></li>
<li class="chapter" data-level="7.8" data-path="recommender-for-beauty-products.html"><a href="recommender-for-beauty-products.html#limitations-1"><i class="fa fa-check"></i><b>7.8</b> Limitations</a></li>
</ul></li>
<li class="part"><span><b>VI Shiny Apps</b></span></li>
<li class="chapter" data-level="8" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html"><i class="fa fa-check"></i><b>8</b> COVID 19 Dashboard</a>
<ul>
<li class="chapter" data-level="8.1" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html#data-3"><i class="fa fa-check"></i><b>8.1</b> Data</a></li>
<li class="chapter" data-level="8.2" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html#curve-of-confirmed-cases"><i class="fa fa-check"></i><b>8.2</b> Curve of confirmed cases</a></li>
<li class="chapter" data-level="8.3" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html#total-cases-per-1-million-people"><i class="fa fa-check"></i><b>8.3</b> Total cases per 1 million people</a></li>
<li class="chapter" data-level="8.4" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html#deaths-vs-recovered"><i class="fa fa-check"></i><b>8.4</b> Deaths vs Recovered</a></li>
<li class="chapter" data-level="8.5" data-path="covid-19-dashboard.html"><a href="covid-19-dashboard.html#active-cases-vs-new-cases"><i class="fa fa-check"></i><b>8.5</b> Active cases vs New cases</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://at.linkedin.com/in/mirzamujanovic?trk=profile-badge" target="blank">LinkedIn: Mirza Mujanovic</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">04-Covid19_Dashboard</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="prediction-with-rfm" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Prediction with RFM</h1>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-100"></span>
<img src="Graphics/bookclub.jpg" alt="Foto from pexels.com" width="50%" />
<p class="caption">
Figure 5.1: Foto from pexels.com
</p>
</div>
<p><em>The Charles Book Club case was derived, with the assistance of Ms. Vinni Bhandari, from The Bookbinders Club, a Case Study in Database Marketing, prepared by Nissan Levin and Jacob Zahavi, Tel Aviv University</em></p>
<div style="text-align: justify">
<p>The Charles Book Club (CBC) was established in December 1986 on the premise that a book club could differentiate itself through a deep understanding of its customer base and by delivering uniquely tailored offerings.
CBC focused on selling specialty books by direct marketing through a variety of channels, including media advertising (TV, magazines, newspapers) and mailing. CBC is strictly a distributor and does not publish any of the books that it sells. In line with its commitment to understanding its customer base, CBC built and maintained a detailed database about its club members. Upon enrollment, readers were required to fill out an insert and mail it to CBC. Through this process, CBC created an active database of 500,000 readers; most were acquired through advertising in specialty magazines.</p>
<p>Historically, book clubs offered their readers different types of membership programs. Two common membership programs are the continuity and negative option programs, which are both extended contractual relationships between the club and its members. Under a continuity program, a reader signs up by accepting an offer of several books for just a few dollars (plus shipping and handling) and an agreement to receive a shipment of one or two books each month thereafter at more-standard pricing. The continuity program is most common in the children’s book market, where parents are willing to delegate the rights to the book club to make a selection, and much of the club’s prestige depends on the quality of its selections.</p>
<p>In a negative option program, readers get to select how many and which additional books they would like to receive. However, the club’s selection of the month is delivered to them automatically unless they specifically mark “no” on their order form by a deadline date. Negative option programs sometimes result in customer dissatisfaction and always give rise to significant mailing and processing costs.</p>
<p>In an attempt to combat these trends, some book clubs have begun to offer books on a positive option basis, but only to specific segments of their customer base that are likely to be receptive to specific offers. Rather than expanding the volume and coverage of mailings, some book clubs are beginning to use database-marketing techniques to target customers more accurately. Information contained in their databases is used to identify who is most likely to be interested in a specific offer. This information enables clubs to design special programs
carefully tailored to meet their customer segments’ varying needs.</p>
<div id="background-information" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Background information</h2>
<p>A new title, The Art History of Florence, is ready for release. CBC sent a test mailing to a random sample of 4000 customers from its customer base. The customer responses have been collated with past purchase data.
Each row (or case) in the spreadsheet (other than the header) corresponds to one market test customer. Each column is a variable, with the header row giving the name of the variable.</p>
<p>CBC sent mailings to its club members each month containing the latest offerings. On the surface, CBC appeared very successful: mailing volume was increasing, book selection was diversifying and growing, and their customer database was increasing. However, their bottom-line profits were falling. The decreasing profits led CBC to revisit their original plan of using database marketing to improve mailing yields and to stay profitable.</p>
</div>
<div id="recency---frequency---monetary-analysis" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Recency - Frequency - Monetary Analysis</h2>
<p>The segmentation process in database marketing aims to partition customers in a list of prospects into homogeneous groups (segments) that are similar with respect to buying behavior. The homogeneity criterion we need for segmentation is the propensity to purchase the offering. However, since we cannot measure this attribute, we use variables that are plausible indicators of this propensity.</p>
<p>In the direct marketing business, the most commonly used variables are the RFM variables:</p>
<ul>
<li>R = recency, time since last purchase</li>
<li>F = frequency, number of previous purchases from the company over a period</li>
<li>M = monetary, amount of money spent on the company’s products over a period</li>
</ul>
<p>The assumption is that the more recent the last purchase, the more products bought from the company in the past, and the more money spent in the past buying the company’s products, the more likely the customer is to purchase the product offered.</p>
<p>The observations in the dataset were divided into recency, frequency, and monetary categories as follows:</p>
<ul>
<li>Recency:</li>
</ul>
<table class=" lightable-paper lightable-hover" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Recency
</th>
<th style="text-align:left;">
Recode
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0–2 months
</td>
<td style="text-align:left;">
Rcode = 1
</td>
</tr>
<tr>
<td style="text-align:left;">
3–6 months
</td>
<td style="text-align:left;">
Rcode = 2
</td>
</tr>
<tr>
<td style="text-align:left;">
7–12 months
</td>
<td style="text-align:left;">
Rcode = 3
</td>
</tr>
<tr>
<td style="text-align:left;">
13 months and up
</td>
<td style="text-align:left;">
Rcode = 4
</td>
</tr>
</tbody>
</table>
<ul>
<li>Frequency:</li>
</ul>
<table class=" lightable-paper lightable-hover" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Frequency
</th>
<th style="text-align:left;">
Recode
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1 book
</td>
<td style="text-align:left;">
Fcode = 1
</td>
</tr>
<tr>
<td style="text-align:left;">
2 books
</td>
<td style="text-align:left;">
Fcode = 2
</td>
</tr>
<tr>
<td style="text-align:left;">
3 books
</td>
<td style="text-align:left;">
Fcode = 3
</td>
</tr>
</tbody>
</table>
<ul>
<li>Monetary:</li>
</ul>
<table class=" lightable-paper lightable-hover" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Monetary
</th>
<th style="text-align:left;">
Recode
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0 – 25
</td>
<td style="text-align:left;">
Mcode = 1
</td>
</tr>
<tr>
<td style="text-align:left;">
26–50
</td>
<td style="text-align:left;">
Mcode = 2
</td>
</tr>
<tr>
<td style="text-align:left;">
51–100
</td>
<td style="text-align:left;">
Mcode = 3
</td>
</tr>
<tr>
<td style="text-align:left;">
101–200
</td>
<td style="text-align:left;">
Mcode = 4
</td>
</tr>
<tr>
<td style="text-align:left;">
201 and up
</td>
<td style="text-align:left;">
Mcode = 5
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border: 0;" colspan="100%">
<span style="font-style: italic;">Note: </span> <sup></sup> Montary values are denoted in USD
</td>
</tr>
</tfoot>
</table>
</div>
<div id="assignment" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Assignment</h2>
<p><em>Partition the data into training (60%) and validation (40%). Use seed = 1.</em></p>
<p>What is the response rate for the training data customers taken as a whole? What is the response rate for each of the 4×5×3 = 60 combinations of RFM categories? Which combinations have response rates in the training
data that are above the overall response in the training data?</p>
<p>Before we answer the question, let us explore the data set:</p>
<pre><code>## Rows: 4,000
## Columns: 24
## $ Seq.             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,...
## $ ID.              &lt;int&gt; 25, 29, 46, 47, 51, 60, 61, 79, 81, 90, 95, 100, 1...
## $ Gender           &lt;int&gt; 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1,...
## $ M                &lt;int&gt; 297, 128, 138, 228, 257, 145, 190, 187, 252, 240, ...
## $ R                &lt;int&gt; 14, 8, 22, 2, 10, 6, 16, 14, 10, 6, 2, 2, 4, 14, 4...
## $ F                &lt;int&gt; 2, 2, 7, 1, 1, 2, 1, 1, 1, 3, 4, 3, 1, 1, 2, 9, 6,...
## $ FirstPurch       &lt;int&gt; 22, 10, 56, 2, 10, 12, 16, 14, 10, 20, 20, 18, 4, ...
## $ ChildBks         &lt;int&gt; 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 2, 2,...
## $ YouthBks         &lt;int&gt; 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,...
## $ CookBks          &lt;int&gt; 1, 0, 2, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 3, 2,...
## $ DoItYBks         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ RefBks           &lt;int&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,...
## $ ArtBks           &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1,...
## $ GeogBks          &lt;int&gt; 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0,...
## $ ItalCook         &lt;int&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,...
## $ ItalAtlas        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,...
## $ ItalArt          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,...
## $ Florence         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0,...
## $ Related.Purchase &lt;int&gt; 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 6, 2,...
## $ Mcode            &lt;int&gt; 5, 4, 4, 5, 5, 4, 4, 4, 5, 5, 5, 5, 5, 4, 5, 5, 5,...
## $ Rcode            &lt;int&gt; 4, 3, 4, 1, 3, 2, 4, 4, 3, 2, 1, 1, 2, 4, 2, 4, 4,...
## $ Fcode            &lt;int&gt; 2, 2, 3, 1, 1, 2, 1, 1, 1, 3, 3, 3, 1, 1, 2, 3, 3,...
## $ Yes_Florence     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0,...
## $ No_Florence      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1,...</code></pre>
<p>First, we will convert the response variable to factor class.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="prediction-with-rfm.html#cb138-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Yes_Florence <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>Yes_Florence, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>),<span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>))</span>
<span id="cb138-2"><a href="prediction-with-rfm.html#cb138-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>No_Florence <span class="ot">&lt;-</span><span class="fu">factor</span>(data<span class="sc">$</span>No_Florence, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>),<span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>))</span></code></pre></div>
<p>Second, we would need to compute RFM score by merging three scores into one cell.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="prediction-with-rfm.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating RFM score</span></span>
<span id="cb139-2"><a href="prediction-with-rfm.html#cb139-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>RFM_score<span class="ot">&lt;-</span> <span class="fu">paste</span>(data<span class="sc">$</span>Rcode,data<span class="sc">$</span>Fcode,data<span class="sc">$</span>Mcode)</span>
<span id="cb139-3"><a href="prediction-with-rfm.html#cb139-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>RFM_score <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>,<span class="st">&quot;&quot;</span>,data<span class="sc">$</span>RFM_score)</span>
<span id="cb139-4"><a href="prediction-with-rfm.html#cb139-4" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>RFM_score<span class="ot">&lt;-</span><span class="fu">as.factor</span>(data<span class="sc">$</span>RFM_score)</span>
<span id="cb139-5"><a href="prediction-with-rfm.html#cb139-5" aria-hidden="true" tabindex="-1"></a>data[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">&quot;RFM_score&quot;</span>]</span></code></pre></div>
<pre><code>##  [1] 425 324 434 115 315 224 414 414 315 235
## 51 Levels: 111 112 113 114 115 122 123 124 125 132 133 134 135 211 212 ... 435</code></pre>
<p>Now we will proceed with data partition. For that we will use <code>sample()</code> function, where we indicate rownames and the number of randomly selected row numbers we want to separate from the remaining data set.
In our case, out of 4000 rows (Customers), we will randomly assign 2400 to train data set, and the rest to test data.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="prediction-with-rfm.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Train data</span></span>
<span id="cb141-2"><a href="prediction-with-rfm.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb141-3"><a href="prediction-with-rfm.html#cb141-3" aria-hidden="true" tabindex="-1"></a>trainIndex <span class="ot">&lt;-</span> caret<span class="sc">::</span><span class="fu">createDataPartition</span>(data<span class="sc">$</span>Florence, <span class="at">p =</span> .<span class="dv">6</span>, </span>
<span id="cb141-4"><a href="prediction-with-rfm.html#cb141-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">list =</span> <span class="cn">FALSE</span>, </span>
<span id="cb141-5"><a href="prediction-with-rfm.html#cb141-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">times =</span> <span class="dv">1</span>)</span>
<span id="cb141-6"><a href="prediction-with-rfm.html#cb141-6" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> data[ trainIndex,]</span></code></pre></div>
<p>The remaining part of the data set will be assigned to the validation data set.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="prediction-with-rfm.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Validation set</span></span>
<span id="cb142-2"><a href="prediction-with-rfm.html#cb142-2" aria-hidden="true" tabindex="-1"></a>validation_data  <span class="ot">&lt;-</span> data[<span class="sc">-</span>trainIndex,]</span></code></pre></div>
</div>
<div id="visual-exploration" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Visual exploration</h2>
<p>It would be beneficial to inspect relationship between recency, frequency and monetary value in the whole data set before we continue. A quite convenient way to do it is a heatmap. There we can plot all three variables at the same time and inspect the monetary value (= amount spend in the time frame observed) of each customer based on his/her frequency and recency.</p>
<p><img src="main_files/figure-html/unnamed-chunk-110-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Unsurprisingly, customers who purchased more frequently generated more revenue compared to those who visited less frequently. However, customers who spent the most are not the most recent ones (= last purchase in 0-2): the heaviest spenders are the frequent ones, but they haven’t made a purchase 3 to 6 months. Usually, we assume that the customers who visited the book club in the recent past (0-2 months) are more likely to return compared to those who made a purchase some time ago as most of those could potentially be lost customers. As such, higher revenue would be associated with most recent visits, but we see that is not really the case here. This could be related to the nature of books as products and the fact that they are not frequently purchased items such as daily products for instance. Nevertheless, it would definitively be worth to consider giving incentives to these customers who spent the most and the company has not heard of them for 3-6 months.</p>
<p>A legit question for better understanding of our target group would be about the difference in recency of customers who responded to advertising of “Florence.”</p>
<p><img src="main_files/figure-html/unnamed-chunk-111-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There seem to be difference in means of the two groups. Non-respondents are somewhat less frequent customers, while respondents belong to more frequent customers. Based on this insight, book lovers are on average more interested in purchasing the new title. Let us inspect their recency.</p>
<p><img src="main_files/figure-html/unnamed-chunk-112-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Customers who responded to the “Florence” campaign have on average lower recency than customers who did not respond. All in all, we can conclude that customers who responded to the campaign are, on average, slightly more frequent and recent than customers who did not respond to campaign.</p>
</div>
<div id="overall-response-rate" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Overall response rate</h2>
<p>Now we can start with addressing the following question: What is the response rate for training data customers taken as whole? Let us compare the percentage of customers in the training data set who responded against those who did not.</p>
<p><img src="main_files/figure-html/unnamed-chunk-113-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Based on the visualisation we see that the overall response rate of customers from the training data is <strong>around 9%.</strong></p>
<pre><code>## [1] 0.08708333</code></pre>
</div>
<div id="prediction-of-response-rate" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Prediction of response rate</h2>
<p>Next question we need to address is which combinations of RFM categories have response rates that are above the overall response in the training data. Now we would need to inspect response rates from all 51 combinations, and compare them with the overall one.</p>
<pre><code>## # A tibble: 51 x 3
##    RFM_score Response_rate Count
##    &lt;fct&gt;             &lt;dbl&gt; &lt;int&gt;
##  1 132               1         1
##  2 122               0.5       2
##  3 211               0.333     3
##  4 212               0.333     9
##  5 233               0.333     6
##  6 114               0.25     16
##  7 215               0.179    28
##  8 135               0.170    53
##  9 223               0.167    24
## 10 335               0.153   215
## # ... with 41 more rows</code></pre>
<p>We can see that there are some RFM categories that have a way higher response rate than 9%. Let us filter the data and keep these RFM categories. The following RFM scores indicate response rate higher than 9%:</p>
<pre><code>## # A tibble: 19 x 3
##    RFM_score Response_rate Count
##    &lt;fct&gt;             &lt;dbl&gt; &lt;int&gt;
##  1 132               1         1
##  2 122               0.5       2
##  3 211               0.333     3
##  4 212               0.333     9
##  5 233               0.333     6
##  6 114               0.25     16
##  7 215               0.179    28
##  8 135               0.170    53
##  9 223               0.167    24
## 10 335               0.153   215
## 11 235               0.151    93
## 12 234               0.146    41
## 13 213               0.136    22
## 14 125               0.118    17
## 15 433               0.118    17
## 16 115               0.115    26
## 17 224               0.114    35
## 18 225               0.114    44
## 19 323               0.1      40</code></pre>
<p>By doing so, we can already identify customers who are more likely to respond to our marketing campaign.
However, let us check how well these response rate from corresponding RFM categories predict the response rate of the same RFM category in the validation data. Therefore, we will compare the average response rate of RFM combinations with above 9% response rate from training data with the average response rate of the same corresponding RFM combinations from the validation data.</p>
<p><img src="main_files/figure-html/unnamed-chunk-117-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Predicted response rate from the training data set is said to be at around 15.1%, while the true response rate taken from validation set is at 10.3%. From comparison of true response rate in the validation data set and the predicted response rate from the training data set it seems that the latter pretty much deviates from the former. In the next section we will split customers from the training set into 3 clusters, and again compare predicted with the true response rate.</p>
</div>
<div id="prediction-of-response-rate-with-3-segments" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Prediction of response rate with 3 segments</h2>
<p>In the previous step we split our RFM categories into two segments, those who had the response rate below 9% percent, and those with above. Let us now rethink segments, and divide our customers in 3 different segments:</p>
<ul>
<li>Segment 1: RFM combinations that have response rates that exceed twice the overall response rate - <strong>RR_Twice.</strong></li>
<li>Segment 2: RFM combinations that exceed the overall response rate but do not exceed twice that rate - <strong>RR_Above.</strong></li>
<li>Segment 3: the remaining RFM combinations - <strong>RR_Below</strong></li>
</ul>
<pre><code>## # A tibble: 51 x 4
##    RFM_score Response_rate Count Cluster 
##    &lt;fct&gt;             &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;   
##  1 132               1         1 RR_Twice
##  2 122               0.5       2 RR_Twice
##  3 211               0.333     3 RR_Twice
##  4 212               0.333     9 RR_Twice
##  5 233               0.333     6 RR_Twice
##  6 114               0.25     16 RR_Twice
##  7 215               0.179    28 RR_Twice
##  8 135               0.170    53 RR_Above
##  9 223               0.167    24 RR_Above
## 10 335               0.153   215 RR_Above
## # ... with 41 more rows</code></pre>
<p>We classified RFM scores based on response rate into 3 segments. Now we will again check how good predictors are these response rates for predicting response rate of the same RFM categories the validation set. We do it by comparing predicted/expected response rate from the training data set with the actual response rate in the validation set.</p>
<p><img src="main_files/figure-html/unnamed-chunk-119-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>By visual inspection we could see that predicted response rates are above the the ones in two out of 3 segments.Customers who had response rate at least twice the initial response rate (9%) were expected to have around 25% response rate, but the true response rate is at significantly lower 9.5% response rate. Similarly, the RFM prediction in case of customers who had response rate between 9 and 18% was slightly inaccurate as well(predicted 14.1 % vs 10.4% true response rate). The only case where true response rate exceeded the predicted response rate is the segment with the response rate below 9%.</p>
</div>
<div id="efficiency-of-the-predictions" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Efficiency of the predictions</h2>
<p>So far, our analysis helped us identify customer segments who are more or less likely to respond to our campaign. However, in order to determine how effectively we can proceed with our campaign, i.e. target those who are most likely to respond to our campaign, we will construct a gain chart. We aim at selecting a relatively small number of customers and getting a relatively large portion of respondents. For a given number of customers expressed in percentages, the gain curve value on the y-axis will show us how much better we are doing compared to random choice of customers.</p>
<pre><code>## # A tibble: 6 x 30
## # Groups:   RFM_score [4]
##    Seq.   ID. Gender     M     R     F FirstPurch ChildBks YouthBks CookBks
##   &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;int&gt;
## 1   422  3739      1    43     2     2          4        0        0       0
## 2  1371 11461      1    41     2     2         10        0        0       0
## 3  3087 25511      0    49     2     2         10        0        0       0
## 4   117  1010      1    31     6     1          6        0        0       0
## 5   709  6183      1    83     4     5         26        0        0       2
## 6  2418 19884      1    22     6     1          6        0        0       0
## # ... with 20 more variables: DoItYBks &lt;int&gt;, RefBks &lt;int&gt;, ArtBks &lt;int&gt;,
## #   GeogBks &lt;int&gt;, ItalCook &lt;int&gt;, ItalAtlas &lt;int&gt;, ItalArt &lt;int&gt;,
## #   Florence &lt;int&gt;, Related.Purchase &lt;int&gt;, Mcode &lt;int&gt;, Rcode &lt;int&gt;,
## #   Fcode &lt;int&gt;, Yes_Florence &lt;fct&gt;, No_Florence &lt;fct&gt;, RFM_score &lt;fct&gt;,
## #   Predicted_RR &lt;dbl&gt;, Count &lt;int&gt;, Predicted_Cluster &lt;chr&gt;, True_RR &lt;dbl&gt;,
## #   True_Cluster &lt;chr&gt;</code></pre>
<p>In order to create such a chart, we will need the information on who responded and who did not respond to our mailing offer from the validation set (= “Florence” column), and the information about the expected response rate based on what we did in our training data. Additionally, we will create a cumulative sum, so that with every customer who responded to our mailing offer the cumulative sum increases by 1.</p>
<pre><code>## # A tibble: 1,600 x 3
##    Florence Predicted_RR Cumulative_Class
##       &lt;int&gt;        &lt;dbl&gt;            &lt;int&gt;
##  1        1        0.5                  1
##  2        0        0.5                  1
##  3        0        0.5                  1
##  4        0        0.333                1
##  5        0        0.333                1
##  6        0        0.333                1
##  7        0        0.333                1
##  8        1        0.333                2
##  9        0        0.333                2
## 10        0        0.333                2
## # ... with 1,590 more rows</code></pre>
<p>Now we can use this data to create the lift/gain chart with <code>caret</code> package:</p>
<div id="htmlwidget-573406326a24e404fc5b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-573406326a24e404fc5b">{"x":{"data":[{"x":[0,100],"y":[0,100],"text":"x1: 0<br />y1: 0<br />x2: 100<br />y2: 100<br />CumTestedPct: 0<br />CumEventPct: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,0.2)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,8.0625],"y":[0,100],"text":"x1: 0<br />y1: 0<br />x2: 8.0625<br />y2: 100<br />CumTestedPct: 0<br />CumEventPct: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,0.2)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8.0625,100],"y":[100,100],"text":"x1: 8.0625<br />y1: 100<br />x2: 100<br />y2: 100<br />CumTestedPct: 8.0625<br />CumEventPct: 100","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,0.2)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.1875,0.75,1.3125,2.625,4.5625,5.375,14.25,17.5625,19.1875,19.8125,22.0625,22.9375,24.625,26.6875,27.875,30.8125,33.8125,38.4375,50.3125,53.5625,58.9375,63.75,66.75,72.625,74.1875,75.0625,79.75,80.875,84.8125,89.375,90.9375,93.1875,100],"y":[0,0.775193798449612,1.55038759689922,2.32558139534884,3.10077519379845,6.97674418604651,6.97674418604651,21.7054263565891,27.906976744186,30.2325581395349,30.2325581395349,31.0077519379845,31.7829457364341,33.3333333333333,35.6589147286822,35.6589147286822,38.7596899224806,44.1860465116279,46.5116279069767,58.1395348837209,60.4651162790698,65.1162790697674,70.5426356589147,74.4186046511628,80.6201550387597,80.6201550387597,81.3953488372093,82.9457364341085,84.4961240310078,86.046511627907,88.3720930232558,89.1472868217054,91.4728682170543,100],"text":["CumTestedPct:   0.0000<br />CumEventPct:   0.0000000","CumTestedPct:   0.1875<br />CumEventPct:   0.7751938","CumTestedPct:   0.7500<br />CumEventPct:   1.5503876","CumTestedPct:   1.3125<br />CumEventPct:   2.3255814","CumTestedPct:   2.6250<br />CumEventPct:   3.1007752","CumTestedPct:   4.5625<br />CumEventPct:   6.9767442","CumTestedPct:   5.3750<br />CumEventPct:   6.9767442","CumTestedPct:  14.2500<br />CumEventPct:  21.7054264","CumTestedPct:  17.5625<br />CumEventPct:  27.9069767","CumTestedPct:  19.1875<br />CumEventPct:  30.2325581","CumTestedPct:  19.8125<br />CumEventPct:  30.2325581","CumTestedPct:  22.0625<br />CumEventPct:  31.0077519","CumTestedPct:  22.9375<br />CumEventPct:  31.7829457","CumTestedPct:  24.6250<br />CumEventPct:  33.3333333","CumTestedPct:  26.6875<br />CumEventPct:  35.6589147","CumTestedPct:  27.8750<br />CumEventPct:  35.6589147","CumTestedPct:  30.8125<br />CumEventPct:  38.7596899","CumTestedPct:  33.8125<br />CumEventPct:  44.1860465","CumTestedPct:  38.4375<br />CumEventPct:  46.5116279","CumTestedPct:  50.3125<br />CumEventPct:  58.1395349","CumTestedPct:  53.5625<br />CumEventPct:  60.4651163","CumTestedPct:  58.9375<br />CumEventPct:  65.1162791","CumTestedPct:  63.7500<br />CumEventPct:  70.5426357","CumTestedPct:  66.7500<br />CumEventPct:  74.4186047","CumTestedPct:  72.6250<br />CumEventPct:  80.6201550","CumTestedPct:  74.1875<br />CumEventPct:  80.6201550","CumTestedPct:  75.0625<br />CumEventPct:  81.3953488","CumTestedPct:  79.7500<br />CumEventPct:  82.9457364","CumTestedPct:  80.8750<br />CumEventPct:  84.4961240","CumTestedPct:  84.8125<br />CumEventPct:  86.0465116","CumTestedPct:  89.3750<br />CumEventPct:  88.3720930","CumTestedPct:  90.9375<br />CumEventPct:  89.1472868","CumTestedPct:  93.1875<br />CumEventPct:  91.4728682","CumTestedPct: 100.0000<br />CumEventPct: 100.0000000"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"How Many Customers Should We Target?","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-10.5,110.5],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,25,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"% Samples Tested","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-10.5,110.5],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,25,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"% Samples Found","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1df040db6f02":{"x":{},"y":{},"xend":{},"yend":{},"x.1":{},"y.1":{},"type":"scatter"},"1df044f10a1":{"x":{},"y":{},"xend":{},"yend":{},"x.1":{},"y.1":{}},"1df0de82773":{"x":{},"y":{},"xend":{},"yend":{},"x.1":{},"y.1":{}},"1df05d4d4b98":{"x":{},"y":{}}},"cur_data":"1df040db6f02","visdat":{"1df040db6f02":["function (y) ","x"],"1df044f10a1":["function (y) ","x"],"1df0de82773":["function (y) ","x"],"1df05d4d4b98":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Based on the gain chart, prediction based on our RFM model performs a bit better than baseline, i.e. random guessing. More specifically, if we target the top 20% customers, meaning the 20% of customers with highest response rates predicted based on their RFM score, it would be expected to reach around 31% of the total number of customers who would respond to our offer.</p>
<p>As the graph is interactive, you are able to check any other percentage you wish. Although we managed to create a model that performs better than just guessing, in the further analyses we will try out other approaches, such as logistic regression, that may provide us better results.</p>
</div>
<div id="summary-of-the-solution" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> Summary of the solution</h2>
<p>CBC embraced the idea of deriving intelligence from their data to allow them to know their customers better and enable multiple targeted campaigns where each target audience would receive appropriate mailings. CBC’s management decided to focus its efforts on the most profitable customers and prospects, and to design targeted marketing strategies to best reach them. The two processes they had in place were:</p>
<p><strong>1. Customer acquisition:</strong></p>
<ul>
<li><p>New members would be acquired by advertising in specialty magazines, newspapers, and social media.</p></li>
<li><p>Direct mailing would contact existing club members.</p></li>
<li><p>Every new book would be offered to club members before general advertising.</p></li>
</ul>
<p><strong>2. Data collection:</strong></p>
<ul>
<li><p>All customer responses would be recorded and maintained in the database.</p></li>
<li><p>Any information not being collected that is critical would be requested from the customer.</p></li>
</ul>
<p>We must be aware that this approach is not the most sophisticated one, but it shows how with pretty simple course of the actions each new title/product can be immediately advertised to the relevant target group. They could use the two-step approach we just demonstrated:</p>
<ol style="list-style-type: decimal">
<li><p>Conduct a market test involving a random sample of customers from the database to enable analysis of customer responses. The analysis would create and calibrate response models for the current book offering.</p></li>
<li><p>Based on the response models, compute a RFM score for each customer in the database prior to sending out offers. Use this score and a cutoff value to extract a target customer list for the promotion.</p></li>
</ol>
</div>
</div>
<div id="reference" class="section level2" number="5.10">
<h2><span class="header-section-number">5.10</span> Reference</h2>
<ul>
<li>Shmueli, G., Bruce, P. C., Yahav, I., Patel, N. R., &amp; Lichtendahl, K. C. (2018). Data mining for business analytics: Concepts, techniques, and applications in R.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="customer-churn-prediction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rfm-for-customer-segmentation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06.1-RFM-BookClub.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
